<?xml version="1.0" encoding="utf-8"?> <!DOCTYPE html> <html lang="en"> <head> <title>CapeDwarf User Guide · CapeDwarf</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="http://static.jboss.org/wildfly/css/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link href="/stylesheets/bootstrap-community-overrides.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="http://static.jboss.org/capedwarf/images//favicon.ico" rel="shortcut icon"> <link href="http://static.jboss.org/capedwarf/images//apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/capedwarf/images//apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/capedwarf/images//apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/capedwarf/images//apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(http://static.jboss.org/capedwarf/images//capedwarf-banner-1180px.png); height: 110px; }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(http://static.jboss.org/capedwarf/images//capedwarf-logo.png); background-repeat:no-repeat; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 200px; margin: 0px auto; }
      }
    </style> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <link href="http://capedwarf.org/stylesheets/blog.css" rel="stylesheet" type="text/css"> <link href="http://capedwarf.org/stylesheets/asciidoctor-coderay.css" media="screen" rel="stylesheet" type="text/css"> <style>
      td.download-size {
        text-align: right;
        padding-right: 10px;
      } 
      
      .white-stripes tr:nth-child(even) {
        background-color: white;
      }
      .white-stripes tr:nth-child(odd) {
        background-color: none;
      }
    </style> </head> <body> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="dropup"> <a class="tabnav-closed" href="https://www.redhat.com" id="tab">Red Hat</a> </div> <div class="banner"> <a href="#"></a> <div class="taglinelight visible-desktop">Google App Engine apps on your own private cloud</div> </div> <div class="navbar navbar-inverse" id="navbar-fix"> <div class="navbar-inner"> <div class="container"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <ul class="nav" id="nav"> <li class=""><a href="http://capedwarf.org/">Home</a></li> <li class=""><a href="http://capedwarf.org/about/">About</a></li> <li class=""><a href="http://capedwarf.org/news/">News</a></li> <li class=""><a href="http://capedwarf.org/downloads/">Downloads</a></li> <li class=""><a href="http://capedwarf.org/documentation/">Documentation</a></li> <li class=""><a href="http://capedwarf.org/gethelp/">Get Help</a></li> <li class=""><a href="http://capedwarf.org/source/">Source Code</a></li> <li class=""><a href="http://capedwarf.org/blog/">Blog</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Follow Us <b class="caret"></b></a> <ul class="dropdown-menu projectsocialmedia"> <li><a href="https://twitter.com/search?q=%23capedwarf"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_twitter.png"></a></li> <li><a href="https://plus.google.com/communities/105087865153736312459"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_googleplus.png"></a></li> </ul> </li> </ul> </div> </div> </div> </div> <div class='breadcrumb'><a class='breadcrumb_anchor ' href='http://capedwarf.org/index.html'>Index</a> / <a class='breadcrumb_anchor ' href='http://capedwarf.org/documentation/index.html'>CapeDwarf Documentation</a> / <a class='breadcrumb_anchor active' href='http://capedwarf.org/documentation/user-guide/index.html'>CapeDwarf User Guide</a></div> <div class="row-fluid"> <div class="visible-desktop project-title-desktop"> <div class="pull-left"> <h1>CapeDwarf User Guide</h1> </div> </div> <div class="hidden-desktop"> <div class="project-title-phone text-center"> <div> <h1>CapeDwarf User Guide</h1> </div> </div> </div> </div> <span id="page"></span> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This is an in-depth guide on how to configure and use pre-compiled versions of CapeDwarf. If, for any reason, you need to build CapeDwarf from scratch, please refer to the project&#8217;s <a href="https://github.com/capedwarf/capedwarf-blue/README.md">README on GitHub</a>.</p> </div> </div> <div id="toc" class="toc"> <div id="toctitle">Table of Contents</div> <ul class="sectlevel1"> <li><a href="#running-capedwarf">1. Running CapeDwarf</a></li> <li> <ul class="sectlevel2"> <li><a href="#running-in-standalone-mode">1.1. Running in standalone mode</a></li> <li><a href="#running-in-a-cluster">1.2. Running in a cluster</a></li> <li><a href="#running-two-server-instances-on-the-same-computer">1.3. Running two server instances on the same computer</a></li> </ul> </li> <li><a href="#production-vs-development">2. Production vs. development</a></li> <li><a href="#configuring-custom-capedwarf-stuff-inbound-mail-xmpp">3. Configuring custom CapeDwarf stuff (inbound mail, xmpp, &#8230;)</a></li> <li> <ul class="sectlevel2"> <li><a href="#admin-email">3.1. Admin Email</a></li> <li><a href="#sending-e-mail-messages">3.2. Sending e-mail messages</a></li> <li><a href="#receiving-e-mail-messages">3.3. Receiving e-mail messages</a></li> <li><a href="#sending-and-receiving-xmpp-messages">3.4. Sending and receiving XMPP messages</a></li> </ul> </li> <li><a href="#compatibility-options">4. Compatibility options</a></li> <li><a href="#compatibility-with-the-real-google-app-engine">5. Compatibility with the real Google App Engine</a></li> <li><a href="#supported-apis-and-caveats">6. Supported APIs and caveats</a></li> <li><a href="#what-to-do-if-you-encounter-a-bug">7. What to do if you encounter a bug</a></li> <li><a href="#differences-between-google-app-engine-and-capedwarf">8. Differences between Google App Engine and CapeDwarf</a></li> </ul> </div> </div> <div class="sect1"> <h2 id="running-capedwarf"><a class="anchor" href="#running-capedwarf"></a>1. Running CapeDwarf</h2> <div class="sectionbody"> <div class="paragraph"> <p>For information on how to download and install CapeDwarf, please refer to the <a href="/documentation/getting-started">Getting Started Guide</a>. Once installed, there are several ways to run CapeDwarf:</p> </div> <div class="ulist"> <ul> <li> <p><strong>Running <code>capedwarf.sh &lt;path to app&gt;</code></strong></p> <div class="paragraph"> <p>CapeDwarf will deploy the application located at <code>&lt;path to app&gt;</code> under the ROOT servlet context, just like GAE development server.</p> </div> </li> <li> <p><strong>Running <code>capedwarf.sh</code> without specifying the path to the application and then copying the application&#8217;s war file into <code>%CAPEDWARF_HOME%/standalone/deployments/</code>.</strong></p> <div class="paragraph"> <p>To deploy the app to the root servlet context, the name of the war should be <code>ROOT.war</code>. Unlike GAE, you can also deploy your app under any servlet context you like. You can even deploy more than one app on the same server (each under its own context).</p> </div> <div class="paragraph"> <p>You can deploy your apps in either compressed war files or in exploded war directories. When deploying your app in an exploded directory, the directory name must include a <code>.war</code> extension and you must add a <code>myapp.war.dodeploy' file, where +myapp.war</code> matches the name of the directory your app is located in.</p> </div> </li> <li> <p><strong>Running <code>standalone.sh -c standalone-capedwarf-modules.xml</code></strong></p> <div class="paragraph"> <p>This is basically the same as running <code>capedwarf.sh</code>, but with one <em>significant caveat</em>. See <a href="#faq/bytecode">[faq/bytecode]</a> for details. It also includes simple App Engine modules support.</p> </div> </li> <li> <p><strong>Running <code>standalone.sh -c standalone-capedwarf.xml</code></strong></p> <div class="paragraph"> <p>This runs CapeDwarf w/o App Engine modules support enabled.</p> </div> </li> </ul> </div> <div class="paragraph"> <p>CapeDwarf can be run on a single node or on many nodes in a cluster.</p> </div> <div class="sect2"> <h3 id="running-in-standalone-mode"><a class="anchor" href="#running-in-standalone-mode"></a>1.1. Running in standalone mode</h3> <div class="paragraph"> <p>Once unzipped into <code>%CAPEDWARF_HOME%</code>, you can run CapeDwarf by simply running <code>%CAPEDWARF_HOME%/bin/capedwarf.sh</code> or <code>capedwarf.bat</code>. The last line of the console output should look something like this:</p> </div> <div class="listingblock"> <div class="content"> <pre>13:50:38,085 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss Capedwarf 2.0.0.Beta2 (WildFly 8.0.0.Final-SNAPSHOT)&#x000A;started in 3885ms - Started 213 of 525 services (350 services are lazy, passive or on-demand)</pre> </div> </div> <div class="paragraph"> <p>Assuming you already have an existing GAE application, you can deploy it on CapeDwarf by simply copying the WAR file to <code>%CAPEDWARF_HOME%/standalone/deployments/ROOT.war</code>. By naming the war <code>ROOT.war</code>, CapeDwarf will deploy the app to the <code>/</code> context path.</p> </div> </div> <div class="sect2"> <h3 id="running-in-a-cluster"><a class="anchor" href="#running-in-a-cluster"></a>1.2. Running in a cluster</h3> <div class="paragraph"> <p>Running CapeDwarf in a cluster is not much different to running it in standalone mode. As soon as you run <code>capedwarf.sh</code> or <code>capedwarf.bat</code> on two computers in the same network, CapeDwarf will join both of them in the same cluster, simple as that.</p> </div> <div class="paragraph"> <p>For more information regarding clustering, see the <a href="https://docs.jboss.org/author/display/WFLY8/High+Availability+Guide">WildFly 8 High Availability Guide</a></p> </div> </div> <div class="sect2"> <h3 id="running-two-server-instances-on-the-same-computer"><a class="anchor" href="#running-two-server-instances-on-the-same-computer"></a>1.3. Running two server instances on the same computer</h3> <div class="paragraph"> <p>When testing, you may want to run two or more instances on the same computer. There are two things that are needed for this to work:</p> </div> <div class="ulist"> <ul> <li> <p>each instance must use its own set of TCP/IP ports. This is achieved by using JVM option <code>-Djboss.socket.binding.port-offset=100</code></p> </li> <li> <p>each instance must use its own data and temp dir. This is also achieved through JVM options: <code>-Djboss.node.name=node2 -Djboss.server.data.dir=${jboss_home}/standalone/dataB -Djboss.server.temp.dir=${jboss_home}/standalone/tmpB</code></p> </li> </ul> </div> </div> </div> </div> <div class="sect1"> <h2 id="production-vs-development"><a class="anchor" href="#production-vs-development"></a>2. Production vs. development</h2> <div class="sectionbody"> <div class="paragraph"> <p>Unlike Google App Engine, where the development server is completely separated from the production environment (Aappspot), CapeDwarf is only available in one single form - you always install the same CapeDwarf version/package, regardless of where you are installing it to - a production or a development server. In order to distinguish between development and production modes, CapeDwarf looks at the <code>com.google.appengine.runtime.environment</code> system property. To run your apps on CapeDwarf in development mode, set the system property to <code>Development</code>, and to run your app in production mode, set the system property to <code>Production</code>.</p> </div> <div class="paragraph"> <p>In CapeDwarf, like in Google App Engine, the type of environment (development/production) has an effect on whether datastore indexes are auto-generated and whether the User service&#8217;s login url presents the user with a mock or the real login form.</p> </div> </div> </div> <div class="sect1"> <h2 id="configuring-custom-capedwarf-stuff-inbound-mail-xmpp"><a class="anchor" href="#configuring-custom-capedwarf-stuff-inbound-mail-xmpp"></a>3. Configuring custom CapeDwarf stuff (inbound mail, xmpp, &#8230;)</h2> <div class="sectionbody"> <div class="paragraph"> <p>Unlike Google AppSpot which has Google’s while infrastructure at its disposal, CapeDwarf can run on your local server and therefore cannot simply send and receive emails or XMPP messages without a few custom configuration settings.</p> </div> <div class="paragraph"> <p>You configure CapeDwarf through <code>capedwarf-web.xml</code> (in addition to the usual <code>appengine-web.xml</code>).</p> </div> <div class="sect2"> <h3 id="admin-email"><a class="anchor" href="#admin-email"></a>3.1. Admin Email</h3> <div class="paragraph"> <p>The first thing you will need to set up is the admin email.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code class="xml language-xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;capedwarf-web-app&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;admin&gt;</span>i.am.an.admin@wherever.com<span style="color:#070;font-weight:bold">&lt;/admin&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;admin&gt;</span>i_am_also_an_admin@wherever.com<span style="color:#070;font-weight:bold">&lt;/admin&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/capedwarf-web-app&gt;</span></code></pre> </div> </div> <div class="paragraph"> <p>CapeDwarf will use this to determine whether the currently logged in user is the application admin or not.</p> </div> </div> <div class="sect2"> <h3 id="sending-e-mail-messages"><a class="anchor" href="#sending-e-mail-messages"></a>3.2. Sending e-mail messages</h3> <div class="paragraph"> <p>In order to be able to send emails through the Mail Service API, you need to specify properties that will be used by JavaMail when obtaining the mail session.</p> </div> <div class="paragraph"> <p>If you have a GMail account that you would like to use to send emails from your app, you should add the following properties to capedwarf-web.xml:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code class="xml language-xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;capedwarf-web-app&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;mail&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.transport.protocol</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>smtp<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.auth</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.starttls.enable</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.host</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>smtp.gmail.com<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.port</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>587<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.user</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>app.email@gmail.com<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mail.smtp.password</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>your.password<span style="color:#070;font-weight:bold">&lt;/property&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/mail&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/capedwarf-web-app&gt;</span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="receiving-e-mail-messages"><a class="anchor" href="#receiving-e-mail-messages"></a>3.3. Receiving e-mail messages</h3> <div class="paragraph"> <p>If your application needs to process inbound e-mail messages, you need to set up an IMAP/POP3 account where CapeDwarf will poll for messages and deliver them to your application in the standard GAE way. NOTE: Don’t forget to also enable the inbound mail service in appengine-web.xml.</p> </div> <div class="paragraph"> <p>To poll for messages on your application’s GMail account, add this to capedwarf-web.xml:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code class="xml language-xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;capedwarf-web-app&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;inbound-mail&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;protocol&gt;</span>imaps<span style="color:#070;font-weight:bold">&lt;/protocol&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;host&gt;</span>imap.gmail.com<span style="color:#070;font-weight:bold">&lt;/host&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;user&gt;</span>app.email@gmail.com<span style="color:#070;font-weight:bold">&lt;/user&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;password&gt;</span>your.password<span style="color:#070;font-weight:bold">&lt;/password&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;folder&gt;</span>INBOX<span style="color:#070;font-weight:bold">&lt;/folder&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;pollingInterval&gt;</span>10000<span style="color:#070;font-weight:bold">&lt;/pollingInterval&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/inbound-mail&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/capedwarf-web-app&gt;</span></code></pre> </div> </div> <div class="paragraph"> <p>The properties should all be self-explanatory. One thing to note is that CapeDwarf will not delete the messages from IMAP/POP3 account, but will only mark them as read. Also, during startup, it will process all unread messages and deliver them to your application.</p> </div> </div> <div class="sect2"> <h3 id="sending-and-receiving-xmpp-messages"><a class="anchor" href="#sending-and-receiving-xmpp-messages"></a>3.4. Sending and receiving XMPP messages</h3> <div class="paragraph"> <p>CapeDwarf currently includes limited support for sending XMPP messages. It does not support receiving XMPP messages yet. If you would like to be able to send XMPP messages from your application, you need to configure the following XMPP settings in capedwarf-web.xml:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code class="xml language-xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;capedwarf-web-app&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;xmpp&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;host&gt;</span>talk.l.google.com<span style="color:#070;font-weight:bold">&lt;/host&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;port&gt;</span>5222<span style="color:#070;font-weight:bold">&lt;/port&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;username&gt;</span>gtalkuser<span style="color:#070;font-weight:bold">&lt;/username&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;password&gt;</span>password<span style="color:#070;font-weight:bold">&lt;/password&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/xmpp&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/capedwarf-web-app&gt;</span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="compatibility-options"><a class="anchor" href="#compatibility-options"></a>4. Compatibility options</h2> <div class="sectionbody"> <div class="paragraph"> <p>CapeDwarf aims to be fully compatible with Google App Engine, but in certain situations, you may wish to explicitly disable certain compatibility features in order to use additional benefits that the WildFly Application Server has to offer. Turning features on or off can come in handy when porting a non-GAE application to GAE or vice-versa.</p> </div> <div class="paragraph"> <p>You can turn compatibility options on or off in three ways:</p> </div> <div class="ulist"> <ul> <li> <p>through system properties</p> </li> <li> <p>through <code>capedwarf.conf</code> in <code>%CAPEDWARF_HOME%/bin</code></p> </li> <li> <p>through <code>capedwarf-compatibility.properties</code> placed on the class path</p> </li> </ul> </div> <div class="paragraph"> <p>Here’s a list of all the available options and what they do:</p> </div> <div class="ulist"> <ul> <li> <p><code>disable.entity.groups</code></p> <div class="paragraph"> <p>Datastore transactions operate only on entities belonging to the same entity group. By disabling this compatibility option, CapeDwarf allows you to operate on different entity groups in the same transaction.</p> </div> </li> <li> <p><code>disable.query.inequality.filter.check</code></p> <div class="paragraph"> <p>GAE does not allow specifying more than one inequality condition in the filter of a datastore query. By default, CapeDwarf does not allow it also, but you can disable this check through this option.</p> </div> </li> <li> <p><code>ignore.entity.property.conversion</code></p> <div class="paragraph"> <p>GAE stores Integer, Short and Byte entity properties as Long; it also stores Float as Double; it stores empty collections as null. This means entities that are read from the datastore may not have the same property types as the original entity before it was stored in the datastore. In order to be compatible with GAE, CapeDwarf also performs these conversions, but you can disable them with this option.</p> </div> </li> <li> <p><code>ignore.logging</code></p> <div class="paragraph"> <p>As the name itself suggests, enabling this options disables logging completely. Since log lines are stored in the datastore, disabling logging may increase performance when logging is not needed. We disable logging in all of our tests except logging tests.</p> </div> </li> <li> <p><code>async.logging</code></p> <div class="paragraph"> <p>By default, storing of log records is performed synchronously. This means when the log record will definitely already be written to the datastore by the time the log statement completes. By turning on async logging, the records will be written asynchronously.</p> </div> </li> <li> <p><code>enable.eager.datastore.stats=(sync|async)</code></p> <div class="paragraph"> <p>Datastore statistics are turned OFF by default. To turn the stats on, you must specify whether they should be written to the datastore synchronously or asynchronously.</p> </div> </li> <li> <p><code>enable.globalTimeLimit</code></p> <div class="paragraph"> <p>All front-end requests are limited to 60 seconds. You can disable this time limit through this option.</p> </div> </li> <li> <p><code>disable.blacklist</code></p> <div class="paragraph"> <p>GAE only allows you to use JRE classes that are white-listed (see <a href="https://developers.google.com/appengine/docs/java/jrewhitelist)">https://developers.google.com/appengine/docs/java/jrewhitelist)</a>. By enabling this option, CapeDwarf will allows you to use any JRE class.</p> </div> </li> <li> <p><code>disable.metadata</code></p> <div class="paragraph"> <p>Disable processing and storing of Datastore metadata information (see <a href="https://developers.google.com/appengine/docs/java/datastore/metadataqueries)">https://developers.google.com/appengine/docs/java/datastore/metadataqueries)</a>. If your application does not need to perform any metadata queries, disabling this may bring some performance improvements.</p> </div> </li> <li> <p><code>enabled.subsystems</code></p> <div class="paragraph"> <p>Specify all the WildFly subsystems that are not enabled by default, but you want them to be enabled..</p> </div> </li> <li> <p><code>disabled.subsystems</code></p> <div class="paragraph"> <p>Specify all the WildFly subsystems that are enabled by default, but you don’t want them to be.</p> </div> </li> <li> <p><code>force.async.datastore</code></p> <div class="paragraph"> <p>Forces async cache mode on infinispan caches used by the datastore implementation.</p> </div> </li> <li> <p><code>log.to.file</code></p> <div class="paragraph"> <p>In certain situations you may wish the log to be written to a file (probably mostly during development or debugging). Even if logging is disabled with ignore.logging, CapeDwarf will still log to a file.</p> </div> </li> <li> <p><code>enable.socket.options</code></p> <div class="paragraph"> <p>GAE does not allow you to set certain socket options. With this option enabled, CapeDwarf does not impose any restrictions on what options you are allowed to set.</p> </div> </li> <li> <p><code>ignore.capedwarf.sockets</code></p> <div class="paragraph"> <p>By default, CapeDwarf’s socket factory wraps all sockets in a CapeDwarfSocket. When this option is enabled, the socket factory returns the original socket instance - it does not wrap it.</p> </div> </li> <li> <p><code>ignore.capedwarf.url.stream.handler</code></p> <div class="paragraph"> <p>CapeDwarf uses its own URLStreamHandler. You can disable this through this option.</p> </div> </li> <li> <p><code>channel.default.duration.minutes</code></p> <div class="paragraph"> <p>Determines how many minutes before the channel expires.</p> </div> </li> <li> <p><code>default.gcs.bucket.name</code></p> <div class="paragraph"> <p>Sets the default Google Cloud Service bucket name. If not set, the default used by CapeDwarf is CAPEDWARF_GCS_BUCKET.</p> </div> </li> <li> <p><code>disable.websockets.channel</code></p> <div class="paragraph"> <p>The Channel API implementation uses WebSockets if the browser supports them and falls back to a XmlHttpRequest implementation if it doesn’t. You can disable the usage of WebSockets through this option. In that case, CapeDwarf will always use the XmlHttpRequest channel implementation.</p> </div> </li> <li> <p><code>taskqueue.roles</code></p> <div class="paragraph"> <p>By default, all requests to Push Task Queue servlets are made with the “admin” role. You can change the roles through this option.</p> </div> </li> <li> <p><code>force.standalone.tx.tracker</code></p> <div class="paragraph"> <p>Force in-memory transaction tracking, instead of global/clustered tracking. This should optimize things a bit, but it can only be used standalone.</p> </div> </li> <li> <p><code>enable.all</code></p> <div class="paragraph"> <p>Instead of separately enabling all of the above options, you can enable all of them simply with enable.all</p> </div> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="compatibility-with-the-real-google-app-engine"><a class="anchor" href="#compatibility-with-the-real-google-app-engine"></a>5. Compatibility with the real Google App Engine</h2> <div class="sectionbody"> <div class="paragraph"> <p>It is our aim to be fully compatible with Google App Engine. That is the reason why we started the <a href="http://appengine-tck.org">Google App Engine TCK</a> project together with Google.</p> </div> </div> </div> <div class="sect1"> <h2 id="supported-apis-and-caveats"><a class="anchor" href="#supported-apis-and-caveats"></a>6. Supported APIs and caveats</h2> <div class="sectionbody"> </div> </div> <div class="sect1"> <h2 id="what-to-do-if-you-encounter-a-bug"><a class="anchor" href="#what-to-do-if-you-encounter-a-bug"></a>7. What to do if you encounter a bug</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you encounter any bugs, please check if you’re using the latest version of CapeDwarf. If you are, please check if there’s a similar bug filed in our Issue tracking System (<a href="https://issues.jboss.org/browse/CAPEDWARF">https://issues.jboss.org/browse/CAPEDWARF</a>). If there isn’t, please file a new issue and if possible, either add a WAR that replicates the problem or, even better, add a new Arquillian test case to either the CapeDwarf project or the AppEngine TCK. Adding a new test is really not as hard as you may think. All you need to do is: <a href="https://github.com/GoogleCloudPlatform/appengine-tck/blob/master/how_to_submit_tests.md">Adding GAE TCK test</a></p> </div> </div> </div> <div class="sect1"> <h2 id="differences-between-google-app-engine-and-capedwarf"><a class="anchor" href="#differences-between-google-app-engine-and-capedwarf"></a>8. Differences between Google App Engine and CapeDwarf</h2> <div class="sectionbody"> <div class="ulist"> <ul> <li> <p>no multiple versions</p> </li> <li> <p>different <a href="https://issues.jboss.org/browse/CAPEDWARF-241">http session handling</a>; enabled (GAE-like), disabled (Stub), none / default (WildFly&#8217;s default)</p> </li> <li> <p>&#8230;</p> </li> </ul> </div> </div> </div> </div> <footer class="container"> <div class="row-fluid"> <div class="span2 offset1"> <h4>Navigate</h4> <ul> <li> <a href="http://capedwarf.org/about/" title="About">About</a> </li> <li> <a href="http://capedwarf.org/gethelp/" title="Get Help">Get Help</a> </li> <li> <a href="https://community.jboss.org/en/capedwarf?view=discussion" title="Forums">Forums</a> </li> <li> <a href="http://capedwarf.org/downloads/" title="Download">Download</a> </li> </ul> </div> <div class="span2"> <h4>Follow Us</h4> <ul> <li> <a href="http://capedwarf.org/news/" title="News">News</a> <a href="http://capedwarf.org/news.atom" title="Atom">(Atom Feed)</a> </li> <li> <a href="https://twitter.com/search?q=%23capedwarf" title="Twitter">Twitter</a> </li> <li> <a href="https://plus.google.com/communities/105087865153736312459" title="Google+">Google+</a> </li> </ul> </div> <div class="span2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/CAPEDWARF" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/capedwarf" title="Fork">Fork The Code</a> </li> </ul> </div> <div class="span3 offset1"> <h4>LGPL 2.1 License</h4> <p>All dependencies of this project are available under the LGPL or a compatible license.</p> </div> </div> <div class="row-fluid"> <div class="span6 offset1"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2013 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="http://github.com/capedwarf/capedwarf.org" style="text-decoration: underline;">fork the project,</a> and send a pull request. <br> <i class="icon-share"></i> Website released under <a href="http://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;">CC BY 3.0.</a> </p> </div> <div class="span3 offset1"> <div class="jbossbadge"> <a href="http://www.jboss.org/"> <img src="http://static.jboss.org/theme/images/common/jbossbadge.png"> </a> </div> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="http://static.jboss.org/theme/js/libs/bootstrap-community/2.3.1.4/bootstrap-community.min.js"></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqCfg.js'></script> <script type='text/javascript' language='JavaScript' src='http://www.redhat.com/j/elqNow/elqImg.js'></script> <div id="oTags"> <script type="text/javascript" src="//www.redhat.com/j/s_code.js"></script> <script type="text/javascript"><!--
      var coreUrl = encodeURI(document.URL.split("?")[0]).replace(/-/g," ");
      var urlSplit = coreUrl.toLowerCase().split(/\//);
      var urlLast = urlSplit[urlSplit.length-1];
      var pageNameString = "";
      var siteName = "";
      var minorSectionIndex = 3
      if (urlLast == "") {
          urlSplit.splice(-1,1);
      }
      if (urlLast.search(/\./) >= 0) {
          if (urlLast == "index.html") {
              urlSplit.splice(-1,1);
          }
          else {
              urlSplit[urlSplit.length-1] = urlLast.split(".").splice(0,1);
          }
      }
      siteName = urlSplit[2].split(".")[1];
      s.prop14 = s.eVar27 = siteName || "";
      s.prop15 = s.eVar28 = urlSplit[minorSectionIndex] || "";
      s.prop16 = s.eVar29 = urlSplit[minorSectionIndex+1] || "";
      pageNameString = urlSplit.splice(3).join(" | ");
      s.pageName = "jboss | community | " + siteName + " | " + pageNameString;
      s.server = "jboss";
      s.channel = "jboss | community";
      s.prop4 = s.eVar23 = encodeURI(document.URL);
      s.prop21 = s.eVar18 = coreUrl;
      s.prop2 = s.eVar22 = "en";
      s.prop3 = s.eVar19 = "us";
      //--></script> <script type="text/javascript" src="//www.redhat.com/j/rh_omni_footer.js"></script> <script language="JavaScript" type="text/javascript"><!--
      if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
      //--></script> <noscript><a href="http://www.omniture.com" title="Web Analytics"><img src="https://smtrcs.redhat.com/b/ss/redhatcom,redhatglobal/1/H.25.4--NS/0?[AQB]&cdp=3&[AQE]" height="1" width="1" border="0" alt=""/></a></noscript> </div> <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script> <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-40221748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script> </body> </html>